---
wts:
    title: '04 - 建立虛擬網路 (20 分鐘)'
    module: '模組 02 - 核心 Azure 服務 (工作負載)'
---
# 04 - 建立虛擬網路

在這個逐步解說中，我們將建立一個虛擬網路，將兩個虛擬機器部署到該虛擬網路上，然後允許一個虛擬機器 ping 該虛擬網路中的另一個虛擬機器。

# 工作 1：建立虛擬網路 (20 分鐘)

在這個工作中，我們將建立一個虛擬網路。 

1. 登入到 Azure 入口網站，網址：<a href="https://portal.azure.com" target="_blank"><span style="color: #0066cc;" color="#0066cc">https://portal.azure.com</span></a>

2. 從 [**所有服務**] 刀鋒視窗，搜尋並選取 [**虛擬網路**]，然後按一下 [**+ 新增、+ 建立或 + 新建**]。 

3. 在 [**建立虛擬網路**] 刀鋒視窗中，填充下列內容 (其他內容保留預設值)：

    | 設定 | 值 | 
    | --- | --- |
    | 訂用帳戶 | **選取您的訂用帳戶** |
    | 資源群組 | **myRGVNet** (新增) |
    | 名稱 | **vnet1** |
    | 位置 | **美國東部** |
    | 位址空間 |**10.1.0.0/16** |
    | 子網路 - 名稱 | **default** |
    | 子網路位址範圍 | **10.1.0.0/24** |

    ![使用預設欄位建立虛擬網路刀鋒視窗的 [基本] 步驟的螢幕擷取畫面。](../images/0301a.png)
    ![使用預設欄位建立虛擬網路刀鋒視窗的 [IP 位址] 步驟的螢幕擷取畫面。](../images/0301b.png)

5. 按一下 [**檢閱 + 建立**] 按鈕。確保驗證通過。

6. 按一下 [**建立**] 按鈕，部署虛擬網路。 

    **注意**：在您的組織中，您如何知道需要哪些虛擬網路和 IP 位址？

# 工作 2：建立二個虛擬機器

在這個工作中，我們將在虛擬網路中建立兩個虛擬機器。 

1. 從 [**所有服務**] 刀鋒視窗，搜尋 [**虛擬機器**]，然後按一下 [**+ 新增**] 並選擇 [**+ 虛擬機器**]. 

2. 在 [**基本**] 索引標籤中，填充下列資訊 (其他內容保留預設值)：

   | 設定 | 值 | 
   | --- | --- |
   | 訂用帳戶 | **選擇您的訂用帳戶**  |
   | 資源群組 |  **myRGVNet** |
   | 虛擬機器名稱 | **vm1**|
   | 區域 | **美國東部** |
   | 映像 | **Windows Server 2019 資料中心** |
   | 使用者名| **azureuser** |
   | 密碼| **Pa$$w0rd1234** |
   | 公用輸入連接埠| 選取 [**允許選取的連接埠**]  |
   | 選取的輸入連接埠| **RDP (3389)** |
   |||

3. 選取 [**網路**] 索引標籤。確保虛擬機器位於 vnet1 虛擬網路中。檢閱預設設定，但不要進行任何其他變更。 

   | 設定 | 值 | 
   | --- | --- |
   | 虛擬網路 | **vnet1** |
   |||

4. 按一下 [**檢閱 + 建立**]。驗證通過後，按一下 [**建立**]。部署時間可能會有所不同，但部署通常需要 3 到 6 分鐘。

5. 監視部署，但繼續下一步。 

6. 重複上面的步驟 **2 到 4**，再建立一個虛擬機器。確保使用不同的虛擬機器名稱，該虛擬機器位於同一虛擬網路中，並且使用新的公用 IP 位址：

    | 設定 | 值 |
    | --- | --- |
    | 資源群組 | **myRGVNet** |
    | 虛擬機器名稱 |  **vm2** |
    | 虛擬網路 | **vnet1** |
    | 公用 IP | (新) **vm2-ip** |
    |||

7. 請等待兩個虛擬機器部署完成。 

# 工作 3：測試連線 

在這個工作中，我們將允許登入到一個 VM 並 ping 另一個 VM。 

1. 從 [**所有資源**] 刀鋒視窗，搜尋 **vm1**，開啟 [**概觀**] 刀鋒視窗，並確保其 [**狀態**] 為 [**正在執行**]。您可能需要 [**重新整理**] 頁面。

2. 在 [**概觀**] 刀鋒視窗中，按一下 [**連線**] 按鈕。

    **注意**：下列說明告訴您如何從 Windows 電腦連線到 VM。 

3. 在 [**連線到虛擬機器**] 刀鋒視窗中，保留預設選項以透過連接埠 3389 連線 IP 位址，然後按一下 [**下載 RDP 檔案**]。

4. 開啟下載的 RDP 檔案，然後在出現熒幕提示時按一下 [**連線**]。 

5. 在 [**Windows 安全性**] 視窗中，鍵入使用者名稱 **azureuser** 和密碼 **Pa$$w0rd1234**，然後按一下 [**確定**]。

6. 您可能在登入過程中收到證書警告。按一下 [**是**] 或建立連線並連線到部署的 VM。您應該連線成功。

7. 在虛擬機器上開啟 PowerShell 命令提示字元，方法是按一下 [**開啟**] 按鈕，鍵入 **PowerShell**，以滑鼠右鍵按一下 [**Windows PowerShell**]，然後在右鍵功能表中按一下 [**以系統管理員身分執行**]

8. 在P owershell 中，鍵入以下命令嘗試與 vm2 通訊，您將注意到您成功了。

   ```PowerShell
   ping vm2
   ```

恭喜！您已經在一個虛擬網路中設定並部署了兩個虛擬機器。您已經測試了您可以在這兩個 VM 之間通訊。 

**注意**：為了避免額外的成本，您可以删除此資源群組。搜尋資源群組，按一下您的資源群組，然後按一下 [**删除資源群組**]。驗證資源群組的名稱，然後按一下 [**删除**]。監視 [**通知**] 以驗證删除的狀態。
